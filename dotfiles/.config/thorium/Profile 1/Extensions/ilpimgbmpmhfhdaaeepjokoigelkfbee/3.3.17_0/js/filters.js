var WidgetHelpers={resize:function(e,t){var d={width:e||document.body.offsetWidth,height:t||document.body.offsetHeight};window.parent.postMessage({cmd:"widget.resize",data:d},"*")}};
(function(){var t=function(){window.addEventListener("message",(function(t){var e=t.data;if("object"==typeof e){var i=e.cmd,s=e.data;"updateUI"===i&&n(s)}}),!1)},e=function(){$(".close").click((function(t){s("widget.close")})),$("input[type=checkbox], input[type=number]").change((function(){var t=this.value;"number"===this.type&&(t=parseFloat(t)),isNaN(t)&&(t=-1),"checkbox"===this.type&&(t=!!this.checked);var e={};e[this.id]=t,chrome.runtime.sendMessage({cmd:"settings.set",data:e}),s("setting.set",e)})),$(".btn-export").click((function(t){t.preventDefault();var e=this.dataset.target;s("export",e)})),$(".btn-export-clear").click((function(t){t.preventDefault(),s("clear-selected","")})),$(".btn-sort").click((function(t){$(".btn-sort.sort-active").removeClass("sort-active"),$(this).addClass("sort-active");var e=this.dataset.dir,i=this.dataset.metric;s("sort",{dir:e,metric:i})})),$(".btn-reset").click((function(t){t.preventDefault(),s("reset-filters"),chrome.runtime.sendMessage({cmd:"settings.reset-filters"},(function(t){for(var e in s("setting.set",t),t){var i=t[e];-1===i&&(i="");var n=$("#"+e);n[0]&&"checkbox"===n[0].type?n.attr("checked",!!i):n.val(i)}}))}))},i=function(){chrome.runtime.sendMessage({cmd:"app.get_state",data:{}},(function(t){var e=t.settings;for(var i in t.settings){var n=$("#"+i);if(n[0])if("checkbox"===n[0].type)n.prop("checked",e[i]);else if("number"===n[0].type){var s=parseFloat(e[i]);isNaN(s)&&(s=-1),s>=0&&n.val(s)}}}))},n=function(t){t.counters&&($("#total").text(t.counters.total),$("#shown").text(t.counters.good),$("#filtered-out").text(t.counters.bad))},s=function(t,e){window.parent.postMessage({cmd:t,data:e},"*")};return{init:function(){t(),e(),s("widget.ready"),WidgetHelpers.resize(),setTimeout((function(){WidgetHelpers.resize()}),1e3),i()}}})().init();